## æ ¸å¿ƒæ¦‚å¿µ

| åç§°                       | ä»‹ç»                                                         | è¯¦æƒ…                                                         |
| -------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **Ruby**                   | è¿è¡Œæ—¶ï¼Œæ‰€æœ‰ gem éƒ½ä¾èµ– Ruby                                 | astlaneã€CocoaPodsã€Bundler è¿™äº›å·¥å…·éƒ½æ˜¯ç”¨ Ruby å†™çš„ï¼Œæ‰€ä»¥å¿…é¡»æœ‰ Ruby ç¯å¢ƒæ‰èƒ½è¿è¡Œ |
| **gem**                    | Ruby çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥å®‰è£…åº“                                  | Rubyä¸­çš„gemæŒ‡çš„æ˜¯å°è£…å¥½çš„Rubyåº“å’Œåº”ç”¨ç¨‹åºåŒ…ï¼Œæ˜¯ç”¨äºåˆ†å‘å’Œç®¡ç†è¿™äº›åŒ…çš„RubyGemsç³»ç»Ÿä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œgemæœ¬èº«æ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„å…¨ç§°ï¼Œä½†å®ƒä»£è¡¨äº†Rubyç¤¾åŒºå…±äº«å¯å¤ç”¨ä»£ç çš„æ ‡å‡†æ ¼å¼ï¼Œç±»ä¼¼äºPythonçš„pipæˆ–Node.jsçš„npmï¼Œé€šè¿‡gem installç­‰å‘½ä»¤è¿›è¡Œå®‰è£…ç®¡ç†.<br />å®‰è£…ï¼šgem install  <br />åˆ—è¡¨ï¼šgem listã€‚<br />æœç´¢ï¼šgem search |
| **Bundler**                | **Bundler** æ˜¯ Ruby çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå®ƒæ˜¯ gem çš„â€œå‡çº§ç‰ˆâ€ç®¡ç†æ–¹å¼,è¯»å– **Gemfile**ï¼Œç¡®å®šé¡¹ç›®ä¾èµ– | ç‰ˆæœ¬è¦å…¼å®¹ Gemfile ä¸­æŒ‡å®šçš„ fastlane / gem,ç”Ÿæˆ **Gemfile.lock**ï¼Œä¿è¯æ¯æ¬¡ CI / æœ¬åœ°ç¯å¢ƒç”¨çš„ä¾èµ–ç‰ˆæœ¬ä¸€è‡´<br />è¯»å– Gemfile å®‰è£…ä¾èµ–ï¼šbundle install  <br />æ›´æ–°ï¼šbundle update fastlaneã€‚<br />ç‰ˆæœ¬ï¼šbundle -v |
| Homebrew                   | æ˜¯ macOSï¼ˆå’Œ Linuxï¼‰çš„åŒ…ç®¡ç†å™¨                               | å¸®ä½ å®‰è£…ã€å‡çº§ã€å¸è½½è½¯ä»¶å’Œå·¥å…·,<br />å®‰è£…ï¼šbrew install rubyl  <br />åˆ—è¡¨ï¼šbrew listã€‚<br />æœç´¢ï¼šbrew search fastlane |
| **Gemfile / Gemfile.lock** | é¡¹ç›®ä¾èµ–æ¸…å•                                                 | ç”¨ `bundle install` å®‰è£…åˆ°æœ¬åœ°è·¯å¾„ï¼ˆvendor/bundleï¼‰          |
| **Fastlane**               | iOS æ„å»ºå·¥å…·                                                 | é€šè¿‡ gem å®‰è£…ï¼Œéœ€è¦ Ruby + Bundler                           |
| **CocoaPods (`pod`)**      | iOS ä¾èµ–ç®¡ç†å·¥å…·                                             | å¯ä»¥å…¨å±€å®‰è£…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ bundler ç®¡ç†                        |

###  **brew /bundle/gem  å¿«é€Ÿå…³ç³»å›¾**

```
[Homebrew] --> å®‰è£… Ruby  --> [Ruby è§£é‡Šå™¨ + gem]
                                     \
                                      --> [Bundler / bundle] --> ç®¡ç†é¡¹ç›® Gemfile
                                                                      \
                                                                       --> fastlane / pod / å…¶ä»– Ruby å·¥å…·

```

## 1ï¸âƒ£ **Homebrew (brew)**

### åŠŸèƒ½

- ç®¡ç†ç³»ç»Ÿå±‚é¢çš„è½¯ä»¶åŒ…ï¼ˆRubyã€Fastlaneã€CocoaPods ç­‰ï¼‰

### å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹

| æ“ä½œ       | å‘½ä»¤                    | è¯´æ˜               |
| ---------- | ----------------------- | ------------------ |
| å®‰è£…è½¯ä»¶   | `brew install ruby@3.2` | å®‰è£…æŒ‡å®šç‰ˆæœ¬ Ruby  |
| å‡çº§è½¯ä»¶   | `brew upgrade fastlane` | å‡çº§ fastlane      |
| æŸ¥çœ‹ç‰ˆæœ¬   | `brew info fastlane`    | æ˜¾ç¤ºè½¯ä»¶ä¿¡æ¯å’Œç‰ˆæœ¬ |
| åˆ—å‡ºå·²å®‰è£… | `brew list`             | åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶   |
| å¸è½½è½¯ä»¶   | `brew uninstall ruby`   | åˆ é™¤è½¯ä»¶           |
| æœç´¢è½¯ä»¶   | `brew search fastlane`  | æŸ¥æ‰¾å¯ç”¨è½¯ä»¶       |

------

## 2ï¸âƒ£ **gem (RubyGems)**

### åŠŸèƒ½

- Ruby çš„åŒ…ç®¡ç†å™¨ï¼Œå®‰è£… Ruby å·¥å…·æˆ–åº“ï¼ˆfastlaneã€cocoapods ç­‰ï¼‰

### å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹

| æ“ä½œ          | å‘½ä»¤                                       | è¯´æ˜                           |
| ------------- | ------------------------------------------ | ------------------------------ |
| å®‰è£… gem      | `gem install fastlane`                     | å®‰è£… fastlane åˆ° Ruby å…¨å±€ç¯å¢ƒ |
| å‡çº§ gem      | `gem update fastlane`                      | æ›´æ–°æŒ‡å®š gem                   |
| å‡çº§ RubyGems | `gem update --system`                      | å‡çº§ gem è‡ªèº«                  |
| æŸ¥çœ‹ç‰ˆæœ¬      | `gem list fastlane` æˆ– `gem info fastlane` | æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯                   |
| å¸è½½ gem      | `gem uninstall fastlane`                   | åˆ é™¤ gem                       |
| æœç´¢ gem      | `gem search fastlane`                      | æŸ¥æ‰¾ gem                       |

ğŸ’¡ æ³¨æ„ï¼šgem é»˜è®¤å®‰è£…åˆ° Ruby è‡ªå¸¦ç›®å½•ï¼Œå¯èƒ½éœ€è¦ `sudo` æˆ–ä½¿ç”¨ Homebrew Ruby é¿å…æƒé™é—®é¢˜ã€‚

------

## 3ï¸âƒ£ **Bundler (bundle)**

### åŠŸèƒ½

- é€šè¿‡ `Gemfile` ç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œä¿è¯ç‰ˆæœ¬ä¸€è‡´
- å®‰è£…åˆ°é¡¹ç›®æœ¬åœ°è·¯å¾„ï¼ˆ`vendor/bundle`ï¼‰å¯ä»¥é¿å… CI / æœ¬åœ°ç¯å¢ƒå†²çª

### å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹

| æ“ä½œ                 | å‘½ä»¤                                     | è¯´æ˜                                |
| -------------------- | ---------------------------------------- | ----------------------------------- |
| å®‰è£…ä¾èµ–             | `bundle install`                         | è¯»å– Gemfile å®‰è£…ä¾èµ–               |
| ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ bundler | `bundle _2.7.2_ install`                 | å¼ºåˆ¶ä½¿ç”¨ bundler 2.7.2              |
| æ›´æ–°ä¾èµ–             | `bundle update fastlane`                 | æ›´æ–° Gemfile æŒ‡å®šä¾èµ–               |
| æ‰§è¡Œå‘½ä»¤             | `bundle exec fastlane ios beta`          | ä½¿ç”¨ bundle ç®¡ç†çš„ç¯å¢ƒæ‰§è¡Œ fastlane |
| æŸ¥çœ‹ç‰ˆæœ¬             | `bundle -v`                              | å½“å‰ bundler ç‰ˆæœ¬                   |
| è®¾ç½®æœ¬åœ°è·¯å¾„         | `bundle config set path 'vendor/bundle'` | å°†ä¾èµ–å®‰è£…åˆ°é¡¹ç›®ç›®å½•                |

ğŸ’¡ **å…³é”®ç‚¹**ï¼šCI ä¸Š **å¿…é¡»ç”¨ `bundle exec`** æ‰èƒ½ä¿è¯ fastlaneã€podã€æ’ä»¶çš„ç‰ˆæœ¬å’Œ Gemfile.lock ä¸€è‡´ã€‚



> ### 1. Jenkins ä¸ºä»€ä¹ˆè¦ç”¨ **bundle**ï¼Ÿ

**æ ¸å¿ƒåŸå› **ï¼šä¿è¯ **CI ç¯å¢ƒçš„ä¾èµ–ä¸€è‡´æ€§**ï¼Œå®Œå…¨éš”ç¦»ï¼Œä¸ä¾èµ–ç³»ç»Ÿå…¨å±€ gemã€‚

è¯¦ç»†è§£é‡Šï¼š

- `fastlane`ã€`cocoapods` ç­‰å·¥å…·éƒ½æ˜¯ Ruby gemï¼Œä¼šéš Ruby ç‰ˆæœ¬ã€gem ç‰ˆæœ¬å˜åŒ–è€Œä¸åŒã€‚
- åœ¨å¼€å‘æœºä¸Šï¼Œä½ å¯èƒ½æœ‰æœ€æ–°çš„ gemï¼Œè€Œ Jenkins ä¸Šé»˜è®¤å¯èƒ½æ˜¯ç³»ç»Ÿ gem æˆ–å…¶ä»–ç‰ˆæœ¬ã€‚
- å¦‚æœç›´æ¥ç”¨å…¨å±€ gemï¼š
  - ä¸åŒæœºå™¨å¯èƒ½è¡Œä¸ºä¸ä¸€è‡´ï¼ˆCI æ„å»ºå¤±è´¥ï¼‰
  - æƒé™é—®é¢˜ï¼ˆJenkins å¯èƒ½æ²¡ sudo æƒé™å®‰è£…å…¨å±€ gemï¼‰
- **Bundle çš„å¥½å¤„**ï¼š
  - ä½¿ç”¨ `Gemfile` æŒ‡å®šç‰ˆæœ¬ï¼Œä¿è¯ CI æ¯æ¬¡å®‰è£…çš„ fastlane / pods / å…¶ä»– gem éƒ½ä¸€è‡´
  - å¯ä»¥å®‰è£…åˆ°é¡¹ç›®ç›®å½• (`vendor/bundle`) ä¸éœ€è¦ sudo
  - é€šè¿‡ `bundle exec` è¿è¡Œå‘½ä»¤ï¼Œç¡®ä¿ä½¿ç”¨çš„æ˜¯ Gemfile ä¸­æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿå…¨å±€ç‰ˆæœ¬

æ‰€ä»¥ï¼Œ**Jenkins ç”¨ bundle æ˜¯ä¸ºäº† CI æ„å»ºç¨³å®šã€å¯å¤ç°**ã€‚



> ### 2.  fastlane è¦æ±‚

## ğŸ”¹ æ€»ç»“ï¼šç°ä»£ CI æ¨èç¯å¢ƒ

- **macOS** + Xcode å¯¹åº”ç‰ˆæœ¬
- **Ruby 3.2**ï¼ˆHomebrew æˆ– rbenvï¼‰ fastlane 2.230+ æ”¯æŒ Ruby 2.7+ï¼ŒRuby 4 ä¸å®Œå…¨å…¼å®¹,ç³»ç»Ÿ Ruby å¯èƒ½æƒé™ä¸è¶³ï¼Œ
- **Bundler 2.7.x**ï¼ˆå›ºå®šç‰ˆæœ¬ï¼‰   fastlane æœ€æ–°ç‰ˆä¸å…¼å®¹ Bundler 4.x
- **fastlane 2.230.x+**ï¼ˆé€šè¿‡ Gemfile + bundle å®‰è£…ï¼‰
- **CocoaPods 1.14.x+**ï¼ˆé€šè¿‡ Gemfile + bundle æˆ–å…¨å±€å®‰è£…ï¼‰ æˆ‘çš„1.16.2
- **æ‰€æœ‰ä¾èµ–é€šè¿‡ bundle exec ç®¡ç†**
- **CI è„šæœ¬æ˜ç¡®è®¾ç½® PATH å’Œ BUNDLE_GEMFILE**

----

### æ€»ç»“å»ºè®®-->åªç”¨ä¸€ä¸ª Ruby

1. **Homebrew Ruby 3.2** ä½œä¸ºå”¯ä¸€ Rubyã€‚
2. ç”¨ **gem å®‰è£… bundler / fastlane / cocoapods**ã€‚
3. é¡¹ç›®é‡Œç”¨ **Gemfile + bundle exec** ç®¡ç†ç‰ˆæœ¬ã€‚
4. Jenkins æ„å»ºè„šæœ¬ PATH æŒ‡å‘ Homebrew Rubyï¼Œä¿è¯ CI ç”¨åŒä¸€å¥—ç¯å¢ƒã€‚

æ­¥éª¤:

- å¤„ç†ä¸‹.zshrcä¸­çš„é—®é¢˜
  ```
  export PATH="/opt/homebrew/opt/ruby@3.2/bin:/opt/homebrew/bin:$PATH"
  é¡¶éƒ¨æ·»åŠ è¿™ä¸ª
  
  source ~/.zshrc  è¿™ä¸ªæ˜¯ç«‹é©¬ç”Ÿæ•ˆ
  ```

  è¿™æ ·ï¼š
  
  1. `ruby -v` ä¼šæ˜¾ç¤º 3.2 ç‰ˆæœ¬
  2. `gem` / `bundle` / `pod` éƒ½ä¼šä½¿ç”¨ 3.2 å¯¹åº”çš„ç¯å¢ƒ
  3. Jenkins CI æ„å»ºè„šæœ¬ä¹Ÿèƒ½ä¸€è‡´åœ°ä½¿ç”¨ Ruby 3.2
  
- ç¡®è®¤å„ä¸ªç‰ˆæœ¬
  bundle

  ```
  1.  where bundle                                      
  /opt/homebrew/opt/ruby@3.2/bin/bundle
  /usr/bin/bundle   è¿™æ˜¯ç³»ç»Ÿçš„ å¯ä»¥å¿½ç•¥
  lin@lindeMac-mini proj %  bundler -v
  Bundler version 2.7.2  ç¡®å®šæ˜¯2.7.2
  
  2. bundle install  
  ä½†æ˜¯ä¼šå¾ˆå¤šæŠ¥é”™ ä¸»è¦æ˜¯ Gemfile.lock ä¹‹å‰é”æ­»
  CI / ç”Ÿäº§ç¯å¢ƒï¼šä¸å…è®¸â€œå·å·æ”¹ä¾èµ–â€ä¿æŒåŒä¸€ç¯å¢ƒ,æ‰€ä»¥å¯ä»¥å…ˆ :è§£å†»
  bundle config set frozen false ç„¶å é‡æ–°å®‰è£…bundle install
  æˆ‘åœ¨gemfile ä¸­çš„å†…å®¹:æŒ‡å®šç‰ˆæœ¬
  
  source "https://rubygems.org"
  
  gem "bundler", "~> 2.7.2"
  gem "fastlane", "~> 2.230"
  gem "cocoapods", "1.16.2"
  
  plugins_path = File.join(File.dirname(__FILE__), 'fastlane', 'Pluginfile')
  eval_gemfile(plugins_path) if File.exist?(plugins_path)
  
  
  ç„¶åä¸Šé”ä¸Šå†»:
  bundle config set frozen true
  æŸ¥çœ‹ä¸‹ è®¾ç½®æ•ˆæœ å®Œç¾äº†
  cat .bundle/config
  ---
  BUNDLE_PATH: "vendor/bundle"
  BUNDLE_DEPLOYMENT: "true"
  BUNDLE_FROZEN: "true"
  
  
  
  ```
  
  æœ‰ä¸ªç–‘é—®:è¿™ä¹ˆå¤š bundle/gem/vendor éƒ½åœ¨ é¡¹ç›®å†…,è‡ƒè‚¿ æ˜¯å¦åˆç†?
  
  ```objc
  lin@lindeMac-mini proj % pwd
  /Users/lin/Documents/HuaYuann/build/ios/proj
  lin@lindeMac-mini proj % ls -al
  total 216
  drwxr-xr-x@  6 lin  staff    192  1 15 19:33 HuaYuann.xcodeproj
  drwxr-xr-x@  5 lin  staff    160  6 12  2025 HuaYuann.xcworkspace
  -rw-r--r--@  1 lin  staff   4894  1 16 09:16 Podfile
  -rw-r--r--@  1 lin  staff  27636  1 15 19:31 Podfile.lock
  drwxr-xr-x  53 lin  staff   1696  1 16 09:18 Pods
  //å¯ä»¥ä¿ç•™ä¹Ÿå¯ä»¥æ”¾åˆ°å…¨å±€
  drwxr-xr-x   3 lin  staff     96  1 16 10:00 .bundle
  drwxr-xr-x@ 11 lin  staff    352  1 16 09:58 fastlane
  //é¡¹ç›®ä¾èµ–æ¸…å•å’Œç‰ˆæœ¬é”å®šï¼Œè¿™æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ bundler æ— æ³•ä¿è¯ CI å’Œå¼€å‘æœºä¸€è‡´
  -rw-r--r--@  1 lin  staff    240  1 16 14:17 Gemfile
  -rw-r--r--   1 lin  staff   6397  1 16 10:32 Gemfile.lock
  //å¥½å¤„ï¼šæ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ï¼Œä¸ä¾èµ–ç³»ç»Ÿ gemï¼ŒCI/jenkins æ„å»ºå®‰å…¨ åå¤„ï¼šå ç©ºé—´,é‡å¤å®‰è£…
  drwxr-xr-x   3 lin  staff     96  1 16 10:32 vendor
  ```
  
- jenkinsçš„ä»£ç è„šæœ¬

```
#!/bin/bash
set -e
set -o pipefail

# 1ï¸âƒ£ å›ºå®š Ruby ç‰ˆæœ¬ï¼ˆå”¯ä¸€æ¥æºï¼‰
export PATH="/opt/homebrew/opt/ruby@3.2/bin:/opt/homebrew/lib/ruby/gems/3.2.0/bin:/opt/homebrew/bin:$PATH"

# 2ï¸âƒ£ CI ç¯å¢ƒå˜é‡
export CI=true
export FASTLANE_SKIP_UPDATE_CHECK=1
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

echo "===== ENV CHECK ====="
which ruby
ruby -v
which bundle
bundle -v
which fastlane
which pod
pod --version
which node
node -v

# 3ï¸âƒ£ è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/lin/Documents/HuaYuann/build/ios/proj

# 4ï¸âƒ£ å®‰è£… Gemfile.lock ä¸­å®šä¹‰çš„ä¾èµ–
bundle install

# 5ï¸âƒ£ ä½¿ç”¨ bundle exec è¿è¡Œ fastlane
bundle exec fastlane ios huayuann_build type:adhoc update_description:"jenkins æ‰“åŒ…"

```

- å¯åŠ¨jenkinsæ¨¡å¼(ä¸å»ºè®®)

- >  è®©åŒäº‹ä¹Ÿå¯ä»¥è®¿é—®ç¡®è®¤ Jenkins æ˜¯å¦åœ¨è¿è¡Œ

  1. åœ¨ç»ˆç«¯æ‰§è¡Œï¼š

  ```
  ps aux | grep jenkins
  ```

  2. ç¡®è®¤ Jenkins ç›‘å¬çš„ç«¯å£

  é»˜è®¤ Jenkins ç”¨ 8080ï¼Œä½†å®ƒå¯èƒ½åªç›‘å¬ `127.0.0.1`ï¼ˆæœ¬æœºå›ç¯ï¼‰è€Œä¸æ˜¯å±€åŸŸç½‘ IPã€‚

  ç”¨è¿™ä¸ªå‘½ä»¤æ£€æŸ¥ï¼š

  ```
  lsof -i :8080
  ```

  3. ä¿®æ”¹ Jenkins ç›‘å¬åœ°å€

  ä½ å½“å‰å¯åŠ¨ Jenkins ç”¨äº†ï¼š

  ```
  java -jar /opt/homebrew/Cellar/jenkins/2.546/libexec/jenkins.war --httpListenAddress=127.0.0.1 --httpPort=8080
  ```

  éœ€è¦æ”¹æˆï¼š

  ```
  java -jar /opt/homebrew/Cellar/jenkins/2.546/libexec/jenkins.war --httpListenAddress=0.0.0.0 --httpPort=8080
  ```

  4. æ‰¾åˆ°ä½ ç”µè„‘åœ¨å±€åŸŸç½‘çš„ IPï¼š

     ```
     ipconfig getifaddr en0
     
     192.168.63.138
     ```

     æœ¬æœºï¼š`http://127.0.0.1:8080/` â†’ OK

     å±€åŸŸç½‘åŒäº‹ï¼š`http://192.168.63.138:8080/` â†’ OK

  5. å¿«é€Ÿå¯åŠ¨è¿˜å¯ä»¥ä½¿ç”¨(ç›®å‰é€‰æ‹©)
     ```
     nohup java -jar /opt/homebrew/Cellar/jenkins/2.546/libexec/jenkins.war \
       --httpListenAddress=0.0.0.0 \
       --httpPort=8080 > ~/jenkins.log 2>&1 &
       
       
      å¯çš„: ä¸Šé¢ 
      å…³é—­: pkill -f jenkins.war
      æµ‹è¯•: ps aux | grep jenkins
     ```
     
     http://192.168.63.138:8080/

- ç¯å¢ƒä¸€è‡´åé‚£ä¹ˆå°±å¯ä»¥,è·‘jenkinsäº†,éœ€è¦å¼€å¯æœåŠ¡/å…³é—­æœåŠ¡

```
where jenkins 
/opt/homebrew/bin/jenkins
è¯´æ˜æ˜¯ Homebrew å®‰è£… + launchd ç®¡ç†ï¼Œé‚£å°±å¿…é¡»ç”¨ brew services ç®¡ï¼Œä¸è¦å†æ‰‹åŠ¨ java -jar
```

```
brew services start jenkins å¼€å¯æœåŠ¡/åå°è¿è¡Œ,ä¸ä¾èµ–ç»ˆç«¯
brew services stop jenkins ç«‹åˆ»åœæ­¢ ç«¯å£ 8080 ä¼šé‡Šæ”¾
brew services restart jenkins é‡å¯ Jenkins
brew services list  æŸ¥çœ‹å½“å‰çŠ¶æ€
```



---

ç—›ç‚¹

1. bound ä½ çœŸæ­£ä¸æƒ³å†™ `bundle install`ï¼Œ**ä¸æ˜¯å› ä¸ºå®ƒæ²¡ç”¨**ï¼Œè€Œæ˜¯å› ä¸ºï¼š
   > **å®ƒæ¯æ¬¡éƒ½ä¼šç”Ÿæˆ / ä¿®æ”¹ `vendor/bundle`ï¼Œå¯¼è‡´ git status å˜è„**

   è¿™æ˜¯ä¸€ä¸ª**éå¸¸å…¸å‹çš„ CI ç—›ç‚¹**ï¼Œä½†è§£å†³æ–¹å¼ä¸æ˜¯åˆ  `bundle install`ã€‚
   è§£å†³æ–¹æ³•:

   ### âœ… æ–¹æ¡ˆä¸€ï¼ˆæœ€å¹²å‡€ï¼ŒCI é¦–é€‰ï¼‰

   **ä¸è¦ç”¨ `vendor/bundle`ï¼Œè®© gem è£…åˆ°ç³»ç»Ÿè·¯å¾„**

   åœ¨ Jenkins ä¸Šåªåšä¸€æ¬¡ï¼š

   ```
   bundle config set --global path.system true
   ```

   ç„¶åä½ çš„è„šæœ¬å¯ä»¥ä¿æŒï¼š

   ```
   bundle install
   bundle exec fastlane ios huayuann_build
   ```

   æ•ˆæœï¼š

   - ä¸ç”Ÿæˆ `vendor/bundle`
   - workspace æ°¸è¿œå¹²å‡€
   - `.gitignore` ä¸å†çº ç»“

   ### âœ… æ–¹æ¡ˆäºŒï¼ˆä½ ç°æœ‰ç»“æ„ï¼Œå°æ”¹ï¼‰

   æ˜ç¡®å‘Šè¯‰ Bundler ç”¨ vendorï¼Œä½†å½»åº• ignoreï¼š

   ```
   bundle install --path vendor/bundle
   ```

   å¹¶ç¡®ä¿ä½ å·²ç»åšè¿‡ï¼š

   ```
   git rm -r --cached build/ios/proj/vendor/bundle  
   ```

$(SRCROOT)

---



ignore  å¿½ç•¥bundle/Ruby/gem

```

#///////////////////////////
# Cocos Creator 3D Project
#///////////////////////////

# Cocos ç”Ÿæˆä½†ä¸åº”æäº¤çš„ç›®å½•
library/
temp/
local/
profiles/

# Cocos æ„å»ºè¾“å‡ºï¼ˆåªç²¾ç¡®å¿½ç•¥ï¼Œä¸ä¸€åˆ€åˆ‡ï¼‰
build/ios/node_modules/
build/ios/proj/Pods/
build/ios/proj/archives/
build/ios/proj/build/        # â† æ–°å¢ï¼šXcode build / XCBuildDataï¼ˆå…³é”®ï¼‰

# bundle/Ruby
build/ios/proj/vendor/bundle       #bundle å†…å®¹åº“
build/ios/proj/.bundle
build/ios/proj/vendor/bundle/ruby/3.2.0

# gem
build/ios/proj/Gemfile       #
build/ios/proj/Gemfile.lock
# Jenkins / CI
*.xcarchive
*.ipa


# å¦‚æœä½ ä¸æ‰“ç®—æäº¤ iOS å·¥ç¨‹ï¼Œæ‰å¯ç”¨ä¸‹é¢è¿™ä¸€è¡Œ
# build/

# ======================
# Xcode workspace
# ======================
*.xcworkspace/xcuserdata/
*.xcodeproj/xcuserdata/
*.xcuserstate

#//////////////////////////
# NPM
#//////////////////////////
node_modules/

#//////////////////////////
# VSCode
#//////////////////////////
.vscode/

#//////////////////////////
# WebStorm
#//////////////////////////
.idea/

#//////////////////////////
# macOS
#//////////////////////////
.DS_Store

#//////////////////////////
# Fastlane
#//////////////////////////
build/ios/proj/fastlane/report.xml
build/ios/proj/fastlane/Preview.html
build/ios/proj/fastlane/screenshots/
build/ios/proj/fastlane/test_output/
build/ios/proj/fastlane/.env*
!build/ios/proj/fastlane/.env.example
# bundle/Ruby
build/ios/proj/vendor/bundle       #bundle å†…å®¹åº“
build/ios/proj/.bundle
build/ios/proj/vendor/bundle/ruby/3.2.0

# gem
build/ios/proj/Gemfile       #
build/ios/proj/Gemfile.lock
# Jenkins / CI
*.xcarchive
*.ipa


```

```
/Users/nmodo/Documents/App/nativebility/GardenGlobal/build/ios/proj
/Users/lin/Documents/HuaYuann/build/ios/proj
```

