2023年02月18日

1.添加H264/H265视频编码设置
2.提供MGLiveSDK 文档
3.播放器SDK不集成于MGLiveSDK中



2023年02月20日

1. sdk 在推拉流时,辅路流对外部音频采集添加
2. sdk 移除MGMediaPlayerHelper ,添加MGPlayerGateWay
3.  demo 添加MGMediaPlayerHelper

2023年02月21日

1.协助咪咕app集成MGLiveSDK

2.修改拉流页面退出逻辑

2023年02月22日

1. 协助咪咕app集成MGLiveSDK,提供可运行demo
2. 集成公私有一体化 zego SDK

2023年02月23日

1. 优化外部采集摄像头推流
2.  localstream添加预览流以及主播流
3.  SDK MGPlayerGateWay添加创建流,且继承localstream
4.  demo 修改赛事流创建,以及推流回调

2023年02月24日

1. 添加rtmp推流,添加地址
2. 修改登录/初始化
3. 添加初始化前设置页面-
4. demo 修改B帧传递逻辑



2023年02月27日

1. SDK 移除辅路流 相机部分操作 
2. SDK 修改推流方法,直接用url,且创建流 无需streamid
3.  SDK 房间取消rtc/rtmp 判断
4.  SDK 修改初始化 sign 转 data 方法


2023年02月28日

1. rtmp推流页面添加日志,推流回调
2. SDK 添加预览初始化
3. emo 首页区分预览/rtmp/登录页面



2023年03月01日

1. 运行咪咕SDK接入mglivesdk工程
2. b帧推流的情况在硬解拉流会出现页面卡顿
3. 解决咪咕接入SDK音频出现偶发crash的问题
4. pugc需求讨论会议



2023年03月02日

1. 与tsg美颜讨论最新需求
2. 与APP开发商议后续代码格式,需求api以及SDK使用说明



2023年03月03日

1. 编辑MGLive SDK文档,安卓iOS 统一api

   

2023年03月04日

1. 修改MGLive SDK文档,添加设备探测能力
2. 部分功能模块流程图构建
3. 新的代码分支库创建



总结:

1. rtmp单独推流无初始化功能
2. 预览功能实现
3. pugc项目会议，讨论业务流程以及和sdk相关的功能接口和异常信息。
4. pugc项目会议，和APP对接sdk接口，业务流程和文档

|      |      |
| ---- | ---- |
|      |      |







```
//提交

git commit --amend
```





//待加 --- ⏰⏰⏰⏰⏰⏰⏰

2023年03月06日  10.5h  10:00 上午

1. 完成 MGLive api 开发: 预览流程实现,以及创建localstream类别开发

2023年03月07日  12h  09:00 上午

1. 完成 MGLive api 开发: rtmp 推流 api 开发

2023年03月08日  12h  09:00 上午

1. 完成 MGLive api 开发: rtc 2路 推流 api 开发









2023年03月09日  12h  10:00 上午

1. rtmp推流demo 设置页面以及功能实现

2023年03月10日  13h  09:00 上午  <font color=red>补卡</font>

1.  RTC demo 功能实现
2. 兼容 Xcode 13 添加修改

 2023年03月11日  8h  12:08 上午

1. SDK 添加防踢/采集音频
2. demo 添加拉流页面 ,添加暂停恢复,日志修改

2023年03月12日  8h  12:24 上午

1. 会议代码走读,分析并查看代码质量问题,
2. 确认后续SDK欠缺问题,包括质量买点,状态码处理,日志等



2023年03月13日   10:00 上午  ( <font color=red>补卡</font>)  4h + 8h  12

1. 日志内容添加,多余文件移除
2. 日志模块整理
3.  移除Flivekit
4. 添加状态define

2023年03月14日   09:00 上午  ( <font color=red>补卡</font>) 5h + 8h   13

1. 输入值验证,日志添加,错误码添加
2. 镜像 localstream 创建添加
3. 音频 crash 分析
4. 修改日志默认路径(改成document)

2023年03月15日   10:00 上午  11h

1. SDK新增校验类
2. 移除MGTool 防止重复
3. 与zego,app共同测试并解决音频crash问题

2023年03月16日   10:00 上午  ( <font color=red>补卡 4次了</font>)  3h + 8h    11

1. 修改rtmp 默认登录房间,登录回调传于  流回调方法中
2. 修改初始化,推流等方法api
3. 与APP进行api讨论会议
4. 新增mgliveconfig 含有默认config

2023年03月17日   09:00 上午  ( <font color=red>补卡 5次了</font>) 8 + 4.5h   12.5

1. 赛事流添加更新api
2. 添加获取码率模板方法,初始化赋值,在线模板更替
3. 

2023-03-18 2:38 下午  8h

1. 在线配置config 搭建修复参数
2. 美颜SDK 更替封装

2023-03-19 12:31 下午 8h

1.  iOS端编译重名的问题
2. 修复接口同步客户端修改 
3. 美颜SDK更换完成,并完成封装,更换api



第三周 : 共75.5 个小时  加班35.5个小时



---



* 把另一分支的某提交应用到当前分支
git cherry-pick 0c53ff567
git cherry-pick --continue

---



第四周

2023年03月20日   09:00 上午  23:07  8 + 4h    =  12h  ( <font color=red>补过卡 了</font>)

1. 采集sdk接入Qos埋点，已完成30%
2. SDK层更新API （在线config、埋点、回调等）



2023年03月21日   10:00 上午  22:31  8 + 2.5h  = 10.5h

1、在线config跟采集SDK联调 
2、采集sdk接入Qos埋点



2023年03月22日   10:00 上午   23:10  8 + 3h  = 11h

1、埋点开发完成  
2、在线config配置优化



2023年03月23日   10:00 上午   23:03  8 + 3h =    11h     ( <font color=red>补卡了</font>)  (10:01打的卡)

1. 错误码部分开发完成 
2. 错误事件以及埋点部分开发完成 



2023年03月24日   10:00 上午     8  + 3.5 = 11.5h

1. 完成部分错误码添加
2. 查询码率ID由创建流时改为推流前
3. 查询2.0.1.12版本卡帧原因 @阎晋超

2023年03月25日   10:00 上午     8h    打卡时间14:40

1. 镜像参数修改为
2. 新增获取信息接口 getPugcInfo(int id) 
3. 删除老接口，只留新接口  
4.  creatLocalStream增加action参数
5. 埋点事件ID以及字段优化 
6. 初始化 修改接口 名字 MGLiveScene scene 0尬聊 1二台    -

---

2023年03月27日   10:00 上午     8h    + 4 = 12   下班 00:08   http://jira.cmvideo.cn/browse/MGPLAYER-4885

1.修改镜像传值
2.添加新增获取pugc信息接口

3.localstream添加action
4.初始化添加Scene
5.埋点优化
6.音频流控设置

2023年03月28日   08:46 上午     8h    + 4 = 12  下班:23:16

1.摄像头旋转/前后功能实现,api提供
2.关闭流api实现,去掉传值
3.在线配置需要增加码率自适应控制开关zego_rtmp_enable_rate_control 默认false



2023年03月29日   10:00 上午     8h    +3.5 = 11.5   下班:23:39

1. 添加房间重连通知/链接中断通知修改2. 日志信息息屏代码添加

2. 2路流线程区分

3. 房间错误码修改

4. 旋转角度左右更换

5. 协助APP开发解决集成问题

   

2023年03月30日   10:00 上午     8h    + 3.5= 11.5  下班:23:34

1、增加插入SEI信息
2、美颜和滤镜拆分  
3、息屏代码移除 
4、异常保护 
5、修复埋点相关错误 



2023年03月31日   09:00 上午    ( <font color=red>补卡 到9点</font>)   8h  + 4.5 = 12.5  下班:23:31

1、iOS 开启相机前检测权限  
2、增加插入SEI信息 (二台无法验证) 
3、增加系统版本号判断接口
4、查看APP调用网速问题
5、delete分支删除无用代码

---

2023年04月1日   09:34 上午     8h    下班:20:38   周末加班

1. SEI次媒体消息 发送实现
2. 摄像头旋转角度修复
3. 预览横竖屏切换 视图验证

2023年04月3日   10:00 上午     8h  + 5h = 13    下班:01:07

1. rtmp 恢复推流逻辑更正
2. 重复初始化状态添加
3.  将退出房间的设备操作修改为uninit中,销毁美颜SDK
4. 创建流记录SDK摄像头前后,以及转向
5. 埋点事件字段修改 data_array
6. 与APP开发查询 pugc信息



2023年04月4日   10:00 上午     8h      下班:19:00

1.横竖屏api添加
2.rtmp推流streamid  32位
3.美颜关闭返回值修改



2023年04月5日  清明节 星期三

2023年04月6日 请假   星期四 ---

2023年04月7日 请假  星期五 ---

2023年04月8日 休息  星期六

2023年04月9日 休息  星期日

---

2023年04月10日  09:00 上午     8h  + 4.5h = 12.5    下班:23:31    星期一  打车:47.18

1. 错误码新增3等级,添加错误码/修改名称
2.  对应错误码事件埋点方法修改
3.  二台/尬聊错误码位置修改,码率模板 ID 返回 0
4.  麦克风错误码修改

2023年04月11日  10:00 上午     8h  + 2h = 10    下班:22:11    星期二  打车: 38.16

1. 错误码从8位换成4位
1. notice错误码减少
1.  重连时间默认值均设为360秒
1. 添加错误码逻辑
1.  一体化修改部分枚举值

2023年04月12日  10:00 上午       8h  + 2h = 10    下班:22:01    星期三  打车: 39.01 

1. 新增房间/推流状态值
2. 添加定时器,检测质量回调
3. 修改在线配置默认值,新增质量检测配置项
4. 错误详情新增字段 PugcAction
5. event 移除 type 字段

2023年04月13日  10:00 上午     8h  星期四

1. 私有云不走rtmp推流
2.  储存公私平面id
3. rtmp推流不对赛事流赋值
4. 质量检测由码率更换为总字节数
5. 退出房间状态值修改

2023年04月14日  10:00 上午     8h +2  = 10 h 下班: 22:02  星期五 ()  打车: 39.40

1. SDK初始化状态值的确定(已加,待确认)
2. 协助咪咕视频调用bug修复反馈
3. 反初始化api新添

2023年04月15日  15:05 下午     4h   星期六 下班19:36

1. 日志时间修复
2. 添加反初始化api
3. 查询bug并分析原因



总结 加班 :14.5个小时  一共54.5h

---

2023年04月17日  10:00 上午     8h   星期一 下班 19:24

1. 日志防重复修改
2. 质量检测添加打印

2023年04月18日  10:00 上午     8h + 5 = 13    星期二 下班  次日01:18   打车:47.21

1. 心跳事件补全埋点信息
2. 赛事流查询码率模板ID,默认横屏/1080P
3. 私有云更新appid

2023年04月19日  09:00 上午     8h + 5 = 13  星期三 下班 00:06    打车:46.97

1. 在线配置默认值修改
2. 质量检测逻辑修改,由字节数换成fps
3. 协助zego 验证视频掉帧问题



2023年04月20日 09:00 上午   8h +  3.5 = 11.5  星期四 下班 22:42  打车 :44.13

1. 音频码率值修改
2. 优化发送总帧数统计算法
3. 协助zego验证音频,硬件消除问题



2023年04月21日 09:00 上午   8h  星期五

1. 移除美颜相关framework 做验证APP打包操作
2. 测试咪咕视频直播,并复现bug



周报总结:



1. 日志防重复修改
2. 质量检测添加打印
3. 心跳事件补全埋点信息
4. 赛事流查询码率模板ID,默认横屏/1080P
5. 私有云更新appid
6. 优化发送总帧数统计算法
7. 测试咪咕视频直播,并复现bug

---



2023年04月23日 10:00 上午   8h  星期日 (正常上班 不算加班)

1. 调用zego的sdk时，需要设置成这个，audio_session_do_nothing=true，这个属性新加的。不用原来的那个keep_audio_session_active=true了 ，作用为fix 2台结束后，播放其他视频时出现音量图标
2. 使用tsg所更新的美颜模块 ，来fix 美颜模块出现的crash。



2023年04月24日 10:00 上午 8h 星期一

1. 了解并测试预览实现自主渲染图层AVCaptureVideoPreviewLayer
2. AVCaptureVideoPreviewLayer可以实现相机预览,但是无法实现预览美颜后buffer

2023年04月25日 10:00 上午 8h 星期二

1. 参与PUGC 复盘会议,讨论最新项目遇到问题以及今后规划问题
2. SDK 日志模块内容总结

2023年04月26日 10:00 上午 8h 星期三

1. 项目期间遇到的问题，包括自己发现，客户端反馈，测试反馈等表格汇总

2023年04月27日 10:00 上午 8h 星期四

1. 音频硬件模式调研,主播推流,拉流端可以拉取赛事流音频
2. 设置硬件消除未起到作用



2023年04月28日 10:00 上午 8h 星期五

1. SDK 音频硬件消除模式调研,确定configer 无效,应setAudioDeviceMode实现









----



1. 设置音量 加埋点
2. 赛事流发送事件加 日志(埋点?)
3. 公私云  加埋点











